<!DOCTYPE html>
<html>
<head>
    <title>üîç Zoom Debug Test</title>
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: monospace; }
        #status { position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.9); padding: 15px; z-index: 1000; }
        .success { color: #4caf50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
        canvas { border: 1px solid #333; }
    </style>
</head>
<body>
    <div id="status">
        <h3>üîç Zoom Debug Test</h3>
        <div id="camera-info">Camera: Loading...</div>
        <div id="spherical-info">Spherical: Loading...</div>
        <div id="zoom-info">Zoom: Loading...</div>
        <div><strong>Use mouse wheel to test zoom</strong></div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="js/cameraControls.js"></script>
    
    <script>
        // Create basic scene
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        
        // Add test objects
        const earthGeometry = new THREE.SphereGeometry(1, 32, 32);
        const earthMaterial = new THREE.MeshBasicMaterial({ color: 0x6b93d6 });
        const earth = new THREE.Mesh(earthGeometry, earthMaterial);
        scene.add(earth);
        
        // Position camera
        camera.position.set(0, 10, 25);
        camera.lookAt(0, 0, 0);
        
        // Initialize camera controls using current system
        const cameraControls = new CameraControls(camera, renderer.domElement, scene);
        
        // Update status display
        function updateStatus() {
            document.getElementById('camera-info').innerHTML = 
                `Camera: (${camera.position.x.toFixed(2)}, ${camera.position.y.toFixed(2)}, ${camera.position.z.toFixed(2)})`;
            document.getElementById('spherical-info').innerHTML = 
                `Spherical: r=${cameraControls.spherical.radius.toFixed(2)}, Œ∏=${cameraControls.spherical.theta.toFixed(2)}, œÜ=${cameraControls.spherical.phi.toFixed(2)}`;
            document.getElementById('zoom-info').innerHTML = 
                `Zoom: enabled=${cameraControls.enableZoom}, scale=${cameraControls.zoomSpeed}`;
        }
        
        // Test zoom functionality
        console.log('üîç ZOOM TEST: Starting with current camera controls');
        console.log('üîç Initial camera position:', camera.position.x, camera.position.y, camera.position.z);
        console.log('üîç Initial spherical radius:', cameraControls.spherical.radius);
        
        // Render loop
        function animate() {
            requestAnimationFrame(animate);
            
            // Update camera controls
            cameraControls.update();
            
            // Update status
            updateStatus();
            
            // Rotate earth
            earth.rotation.y += 0.01;
            
            renderer.render(scene, camera);
        }
        
        animate();
        
        // Add manual zoom test buttons
        const testButtons = document.createElement('div');
        testButtons.style.cssText = 'position: fixed; bottom: 20px; left: 20px; z-index: 1000;';
        testButtons.innerHTML = `
            <button onclick="manualZoomIn()" style="margin-right: 10px;">Manual Zoom In</button>
            <button onclick="manualZoomOut()">Manual Zoom Out</button>
        `;
        document.body.appendChild(testButtons);
        
        function manualZoomIn() {
            console.log('üîç MANUAL ZOOM IN: Before -', cameraControls.spherical.radius);
            cameraControls.dollyIn(cameraControls.getZoomScale());
            cameraControls.update();
            console.log('üîç MANUAL ZOOM IN: After -', cameraControls.spherical.radius);
        }
        
        function manualZoomOut() {
            console.log('üîç MANUAL ZOOM OUT: Before -', cameraControls.spherical.radius);
            cameraControls.dollyOut(cameraControls.getZoomScale());
            cameraControls.update();
            console.log('üîç MANUAL ZOOM OUT: After -', cameraControls.spherical.radius);
        }
        
        console.log('üîç ZOOM TEST: Setup complete. Try mouse wheel and manual buttons.');
    </script>
</body>
</html>