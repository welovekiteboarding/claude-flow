<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar System Integration Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-result {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }
        .success {
            background: #2d5016;
            border: 1px solid #4caf50;
        }
        .error {
            background: #5d1a1a;
            border: 1px solid #f44336;
        }
        .info {
            background: #1a3a5d;
            border: 1px solid #2196f3;
        }
        pre {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üöÄ Solar System Integration Test</h1>
        <div id="test-results"></div>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
        <script src="js/planetData.js"></script>
        <script src="js/advancedPhysics.js"></script>
        <script src="js/atmosphereShaders.js"></script>
        <script src="js/nasaHorizonsAPI.js"></script>
        
        <script>
            const results = document.getElementById('test-results');
            
            function addResult(message, type = 'info') {
                const div = document.createElement('div');
                div.className = `test-result ${type}`;
                div.innerHTML = message;
                results.appendChild(div);
            }
            
            function runTests() {
                addResult('üß™ Starting integration tests...', 'info');
                
                // Test 1: Check if classes are available
                try {
                    addResult('‚úÖ AdvancedPhysics class loaded', 'success');
                    const physics = new AdvancedPhysics();
                    addResult('‚úÖ AdvancedPhysics instance created', 'success');
                } catch (error) {
                    addResult('‚ùå AdvancedPhysics failed: ' + error.message, 'error');
                }
                
                try {
                    addResult('‚úÖ AtmosphereShaders class loaded', 'success');
                    const shaders = new AtmosphereShaders();
                    addResult('‚úÖ AtmosphereShaders instance created', 'success');
                } catch (error) {
                    addResult('‚ùå AtmosphereShaders failed: ' + error.message, 'error');
                }
                
                try {
                    addResult('‚úÖ NASAHorizonsAPI class loaded', 'success');
                    const api = new NASAHorizonsAPI();
                    addResult('‚úÖ NASAHorizonsAPI instance created', 'success');
                } catch (error) {
                    addResult('‚ùå NASAHorizonsAPI failed: ' + error.message, 'error');
                }
                
                // Test 2: Check planetary data
                try {
                    if (typeof PLANETARY_DATA !== 'undefined') {
                        addResult('‚úÖ PLANETARY_DATA loaded', 'success');
                        const planetCount = Object.keys(PLANETARY_DATA).length;
                        addResult(`‚úÖ Found ${planetCount} planets in data`, 'success');
                    } else {
                        addResult('‚ùå PLANETARY_DATA not found', 'error');
                    }
                } catch (error) {
                    addResult('‚ùå PLANETARY_DATA test failed: ' + error.message, 'error');
                }
                
                // Test 3: Physics engine validation
                try {
                    const physics = new AdvancedPhysics();
                    addResult('üî¨ Testing physics engine...', 'info');
                    
                    // Test gravitational constant
                    const G = physics.G;
                    const expectedG = 6.67430e-11;
                    if (Math.abs(G - expectedG) < 1e-16) {
                        addResult('‚úÖ Gravitational constant correct', 'success');
                    } else {
                        addResult('‚ùå Gravitational constant incorrect', 'error');
                    }
                    
                    // Test body initialization
                    physics.initializeBodies(PLANETARY_DATA);
                    const bodyCount = physics.bodies.size;
                    addResult(`‚úÖ Initialized ${bodyCount} celestial bodies`, 'success');
                    
                } catch (error) {
                    addResult('‚ùå Physics engine test failed: ' + error.message, 'error');
                }
                
                // Test 4: Atmosphere shaders
                try {
                    const shaders = new AtmosphereShaders();
                    addResult('üåç Testing atmosphere shaders...', 'info');
                    
                    const earthShader = shaders.createEarthAtmosphereShader();
                    if (earthShader) {
                        addResult('‚úÖ Earth atmosphere shader created', 'success');
                    }
                    
                    const marsShader = shaders.createMarsAtmosphereShader();
                    if (marsShader) {
                        addResult('‚úÖ Mars atmosphere shader created', 'success');
                    }
                    
                } catch (error) {
                    addResult('‚ùå Atmosphere shader test failed: ' + error.message, 'error');
                }
                
                // Test 5: NASA API
                try {
                    const api = new NASAHorizonsAPI();
                    addResult('üõ∞Ô∏è Testing NASA HORIZONS API...', 'info');
                    
                    const bodyIDs = Object.keys(api.bodyIDs);
                    addResult(`‚úÖ Found ${bodyIDs.length} supported celestial bodies`, 'success');
                    
                    // Test date formatting
                    const testDate = new Date('2000-01-01T12:00:00Z');
                    const formatted = api.formatDate(testDate);
                    if (formatted === '2000-01-01 12:00:00.000') {
                        addResult('‚úÖ Date formatting correct', 'success');
                    }
                    
                } catch (error) {
                    addResult('‚ùå NASA API test failed: ' + error.message, 'error');
                }
                
                addResult('üéØ Integration tests completed!', 'info');
                addResult('Ready to launch the enhanced solar system simulation at <a href="http://localhost:3000" target="_blank">http://localhost:3000</a>', 'success');
            }
            
            // Run tests when page loads
            window.addEventListener('load', runTests);
        </script>
    </div>
</body>
</html>